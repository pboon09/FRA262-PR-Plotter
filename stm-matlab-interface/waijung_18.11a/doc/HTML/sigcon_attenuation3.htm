<!DOCTYPE HTML>
<html>
<head>
   <title>Hardware Modules &gt; aMG SIGCON-A &gt; Signal Conditioning Design Guidline &gt; Sample Applications &gt; Attenuation &gt; Vin = AC220V (±311V), Vout = 0–3V</title>
   <meta name="generator" content="Help & Manual">
   <meta name="keywords" content="">
   <meta name="description" content="Vin = AC 220 V (±311 V), Vout = 0 – 3 V">
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet">
   <link type="text/css" href="custom.css" rel="stylesheet">
   <script type="text/javascript" src="nsh.js"></script>

<script type="text/javascript">   
// Toggle Toggler 

var toggleCount=false;
var switchState;

function toggleToggles() {

    if (!toggleCount) {
     toggleCount = true;
     HMToggleExpandAll(true);
     switchState = true;
     }
   
     else if (switchState) {
        HMToggleExpandAll(false);
        switchState = false;
        }
        
     else  {
        HMToggleExpandAll(true);
        switchState = true;
        } 
    }
</script>
   
<!-- non-scrolling headers for CHM and browser-based help, local styles-->
<style type="text/css" media="screen"> 
html, body { margin:0; 
   padding:0; 
   overflow: hidden; 
   background: #FFFFFF; 
  }
 
div#printheader { 
   display: none;
   padding-bottom: 10px;
   }
   #idheader { 
      width:100%; 
      height:auto; 
      padding: 0; 
      margin: 0; 
} 
    #idheaderbg  {
    background: #6F6F6F; 
}
   #callout-table, #overview-table {display:block; position:relative; top:0; left:0;}
   #callout-icon {display:block; position:absolute; top:-11px; left:-11px;}
   #callout-icon-flag {display:block; position:absolute; top:-11px; left:-8px;}
   #callout-table a {text-decoration: none; color: blue;}
   #callout-table a:visited {text-decoration: none; color: blue;}
   #overview-table a {text-decoration: none; color: black;}
   #overview-table a:visited {text-decoration: none; color: black;}
   #callout-table a:hover, #overview-table a:hover {text-decoration: underline;}
   p.help-url { margin: 20px 0 5px 0; text-align: center; font-size: 80%; text-decoration: none }
   .sync-toc { color: #ffffff; font-size: 8pt; font-weight: bold; display: none; }
   .sync-toc a { color: #ffffff; text-decoration: none; font-weight: bold;}
   .sync-toc a:visited { color: #ffffff; }
   .sync-toc a:hover { text-decoration: underline; }
   </style>
<!--[if lt IE 7]>
<style type="text/css">
  #idcontent {padding: 0px;} 
  #innerdiv {padding: 10px 5px 5px 10px ;} 
</style> 
<![endif]-->
<noscript>
<style type="text/css">
html, body { overflow: auto; }
</style> 
</noscript>
<style type="text/css" media="print">
span.f_Heading1 { color: black; }
#idheader, #printheader img { display:none; }
#printheader { display: block; margin-top: 20px; }
#idcontent { margin-top: 10px; }
</style>   
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.htm", "sigcon_attenuation3.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>
<!--ZOOMSTOP-->


<div id="printheader"><h1 class="p_Heading1"><span class="f_Heading1">Vin = AC 220 V (±311 V), Vout = 0 – 3 V</span></h1>
</div> 
<div id="idheader">
<div id="idheaderbg">
<table width="100%" border="0" cellspacing="0" cellpadding="0" 
       style="margin: 0px; background: url(header_bg.jpg);">

  <tr valign="bottom">
    <td align="left" valign="bottom" class="topichead">
   <p class="sync-toc">&lt;&lt; <a rel="nofollow" href="index.htm?sigcon_attenuation3.htm" target="_top">Click to Display Table of Contents</a> &gt;&gt;</p>
   <p class="crumbs" id="idnav"><b>Navigation:</b>&nbsp;
   
   <a href="amg_related_hardware.htm">Hardware Modules</a> &gt; <a href="amg_sigcon_a.htm">aMG SIGCON-A</a> &gt; <a href="signal_conditioning_design_gui.htm">Signal Conditioning Design Guidline</a> &gt; <a href="amg_sigcon_a_sample_applications.htm">Sample Applications</a> &gt; <a href="amg_sigcon_attenuation_demo.htm">Attenuation</a>&nbsp;&gt;</p>
   <h1 class="p_Heading1"><span class="f_Heading1">Vin = AC 220 V (±311 V), Vout = 0 – 3 V</span></h1>

    </td>
    <td align="right" width="120" valign="middle" class="topichead" id="idnav">
    
     <a href="sigcon_attenuation2.htm"
        onmouseover="document.images.prev.src='btn_prev_h.gif'" 
        onmouseout="document.images.prev.src='btn_prev_n.gif'"
        ><img name=prev src="btn_prev_n.gif" border=0 alt="Previous page"
        ></a><a href="amg_sigcon_attenuation_demo.htm"
        onmouseover="document.images.main.src='btn_home_h.gif'" 
        onmouseout="document.images.main.src='btn_home_n.gif'"><img name=main src="btn_home_n.gif" border=0 alt="Return to chapter overview"
        ></a><a href="amplifier_circuit.htm"
        onmouseover="document.images.next.src='btn_next_h.gif'" 
        onmouseout="document.images.next.src='btn_next_n.gif'"><img name=next src="btn_next_n.gif" border=0 alt="Next page"
        ></a>
    </td>
  </tr>
  <tr><td colspan="2" style="height: 3px; background: url(header_bg_shadow.gif)"></td></tr>
</table>
</div>

<!-- The following code displays Expand All/Collapse All links  below the header in topics containing toggles -->
  

</div>  



<div id="idcontent"><div id="innerdiv"> 
<!--ZOOMRESTART-->
<p>This situation shows an op-amp based circuit to transform a high-voltage AC waveform into something that a micro-controller can measure directly.</p>
<p><span style="font-weight: bold; color: #ff0000;">DISCLAIMER:</span><span style="color: #ff0000;"> This article no guarantee that the circuit will work in your situation, or that it will be safe. If you’re going to attempt to measure mains voltages, do so at your own risk . If you don’t understand the math or circuit diagram, then you probably shouldn’t be working with mains anyway. I am not responsible for your mistakes. You have been warned.</span></p>
<h3 class="p_Heading3"><span class="f_Heading3">Transfer Curve</span></h3>
<p><img src="attencase3_tf.png" width="950" height="358" alt="attenCase3_TF" style="width:950px;height:358px;border:none" /></p>
<h3 class="p_Heading3"><span class="f_Heading3">Circuit Diagram</span></h3>
<p>&nbsp;</p>
<p><img src="311vto3v.png" width="950" height="291" alt="311vto3v" style="width:950px;height:291px;border:none" /></p>
<p>&nbsp;</p>
<p>This circuit look reasonably familiar with the standard inverting amplifier. However, the key differences are that the non-inverting input is tied to half of Vcc instead of ground (so if you have a 5 V microcontroller, tie this to 2.5 V), and the extra resistor pulling the inverting input up to Vcc. The value of resistor can calculate by: </p>
<p><span style="text-decoration: underline;">Example</span></p>
<p><span style="width:48px">&nbsp;</span>Vo  &nbsp; &nbsp; &nbsp; &nbsp;= (-Rf/Ri)Vi + (0.5Vcc)</p>
<p>and &nbsp; &nbsp; &nbsp; &nbsp;Ri1  &nbsp; &nbsp; &nbsp; &nbsp;= Ri2</p>
<p>Give Rf = 1.6 k<span style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial';">&Omega;</span> and Ri = 368 k<span style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial';">&Omega;</span>, Vi = -311 V, Vo = 3V</p>
<p><span style="width:48px">&nbsp;</span>Ri  &nbsp; &nbsp; &nbsp; &nbsp;= (-Rf × Vi)/(0.5Vcc-Vo)</p>
<p><span style="width:48px">&nbsp;</span> &nbsp; &nbsp;   &nbsp; &nbsp; &nbsp; &nbsp;= (-1.6k<span style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial';">&Omega;</span> × -311V)/(0.5×3.3V-3V)</p>
<p><span style="width:48px">&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp;= 368.59 k<span style="font-family: 'Arial Unicode MS', 'Lucida Sans Unicode', 'Arial';">&Omega;</span></p>
<p>&nbsp;</p>
<p><span class="f_Heading3">Configuration of aMG SIGCON-A:</span> Soldering to Jump J1, J4, J6, and X7. Place Ri resistor to X6, X9 and Rf to X8.</p>
<p>&nbsp;</p>
<p><img src="attencase3_config.png" width="950" height="263" alt="AttenCase3_config" style="width:950px;height:263px;border:none" /></p>
<p>&nbsp;</p>
<h3 class="p_Heading3"><span class="f_Heading3">Demo</span></h3>
<h3 class="p_Heading3"><img src="atten311_demo.png" width="950" height="538" alt="atten311_demo" style="width:950px;height:538px;border:none" /></h3>
<h3 class="p_Heading3"><span class="f_Heading3">Input VS Output Signal</span></h3>
<h3 class="p_Heading3"><img src="311to3_scope.png" width="950" height="295" alt="311to3_scope" style="width:950px;height:295px;border:none" /></h3>
<p>&nbsp;</p>
<p><span style="text-decoration: underline;">Note</span> &nbsp;Some resistor's value which we use in this trial are approximately. You should change these value or use variable R to adjust the accuracy of the output.</p>

<!--ZOOMSTOP-->
</div></div>
<script type="text/javascript">

var lastSlashPos = document.URL.lastIndexOf("/") > document.URL.lastIndexOf("\\") ? document.URL.lastIndexOf("/") : document.URL.lastIndexOf("\\");
if( document.URL.substring(lastSlashPos + 1, lastSlashPos + 4).toLowerCase() != "~hh" )
{
 if (document.all) setTimeout(function() {nsrInit();},20); 
    else nsrInit();
 } 

if ((!parent.hmNavigationFrame) && (parent.location) && (parent.location.href)) { $('.sync-toc').show();$('p.crumbs').hide();}

</script>
</body>
</html>








