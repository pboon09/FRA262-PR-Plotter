<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0040)http://www.getreuer.info/home/colorspace -->
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<script async="" src="./Converting Color Representations - Pascal Getreuer_files/analytics.js"></script><script type="text/javascript">/* Copyright 2008 Google. */ (function() { var b=window,e="chrome",f="tick",g="wtsrt_",h="tbsd_",k="tbnd_",l="start",n="_wtsrt",p="_tbnd";(function(){function m(a){this.t={};this.tick=function(a,c,d){this.t[a]=[void 0!=d?d:(new Date).getTime(),c]};this[f](l,null,a)}var a=new m;b.jstiming={Timer:m,load:a};if(b.performance&&b.performance.timing){var a=b.performance.timing,c=b.jstiming.load,d=a.navigationStart,a=a.responseStart;0<d&&a>=d&&(c[f](n,void 0,d),c[f](g,n,a),c[f](h,g))}try{a=null,b[e]&&b[e].csi&&(a=Math.floor(b[e].csi().pageT),c&&0<d&&(c[f](p,void 0,b[e].csi().startE),c[f](k,p,d))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),
null==a&&b.external&&(a=b.external.pageT,c&&0<d&&(c[f](p,void 0,b.external.startE),c[f](k,p,d))),a&&(b.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" href="http://www.getreuer.info/_/rsrc/1311796240805/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/9b2c46/system/app/images/apple-touch-icon.png" type="image/png">
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d=window,e="length",h="",k="__duration__",l="function";function m(c){return document.getElementById(c)}d.byId=m;function n(c){return c.replace(/^\s+|\s+$/g,h)}d.trim=n;var p=[],q=0;d.JOT_addListener=function(c,a,b){var f=new String(q++);c={eventName:c,handler:a,compId:b,key:f};p.push(c);return f};d.JOT_removeListenerByKey=function(c){for(var a=0;a<p[e];a++)if(p[a].key==c){p.splice(a,1);break}};d.JOT_removeAllListenersForName=function(c){for(var a=0;a<p[e];a++)p[a].eventName==c&&p.splice(a,1)};
d.JOT_postEvent=function(c,a,b){var f={eventName:c,eventSrc:a||{},payload:b||{}};if(d.JOT_fullyLoaded)for(a=p[e],b=0;b<a&&b<p[e];b++){var g=p[b];g&&g.eventName==c&&(f.listenerCompId=g.compId||h,(g=typeof g.handler==l?g.handler:d[g.handler])&&g(f))}else d.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};d.JOT_delayedEvents=[];d.JOT_fullyLoaded=!1;
d.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var f=0;60<=b&&(b/=60,f=2);2<=b&&f++;return a?d.JOT_siteRelTimeStrs[f].replace(k,Math.floor(b)):d.JOT_userRelTimeStrs[f].replace(k,Math.floor(b))}; })()
</script>
<script>


var webspace = {"scottyUrl":"/_/upload","isConsumer":true,"canPublishScriptToAnyone":true,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"sharingUrlPrefix":"/_/sharing","csiReportUri":"http://csi.gstatic.com/csi","sharingPolicy":"OPENED","analyticsAccountId":"","baseUri":"","name":"getreuer","domain":"defaultdomain","features":{"asyncPermanentDelete":false,"horizontalNavLayout":true,"folderEmbed":true,"scottyForTrogImageUpload":true,"moreBackgroundTweaks":true,"flipFolderUrls":true,"animateNavigation":true,"driveInFileCabinet":true,"skiThemeIsDefault":true,"pdfEmbedSupport":false,"animateToc":true,"siteChromeSidebarWidgetsEditDialog":true,"canonicalLinkTagInHead":false,"driveImageEmbed":true,"siteChromeSystemFooterDialog":true,"plusOneButtonOptions":true,"plusOneButton":true,"adSenseDeprecate":true,"photoAlbumsInOnePick":true,"docosHideNotificationSettings":true,"skiTheme":true,"siteChromeDialogsToolbar":true,"plusBadge":false,"siteChromeHorizontalNavigationDialog":true,"youTubeEmbedSize":true,"adSenseDeprecateMsg":true,"htmlEmbed":true,"siteChromeHeaderDialog":true,"photoAlbumsGPlusUrlSupport":true,"disableGoogleVideo":true},"adsensePublisherId":null,"gvizVersion":1,"siteTitle":"Pascal Getreuer","pageSharingId":"jotspot_page","plusPageId":"","termsUrl":"http://sites.google.com/site/sites/system/app/pages/meta/terms","enableAnalytics":false,"isPublic":true,"plusPageUrl":"","homePath":"/","sharingId":"jotspot","isAdsenseEnabled":true,"adsensePromoClickedOrSiteIneligible":true,"isStartPageEnabled":false,"domainAnalyticsAccountId":""};



webspace.gadgets = {"baseUri":"/system/app/pages/gadgets"};


webspace.user = {"uid":"","renderMobile":false,"primaryEmail":"guest","sessionIndex":"","namespaceUser":false,"displayNameOrEmail":"guest","namespace":"","hasAdminAccess":false,"guest_":true,"keyboardShortcuts":true,"domain":"","hasWriteAccess":false,"dasherUser":false,"userName":"guest"};

webspace.page = {"canDeleteWebspace":null,"locale":"en","state":"","wuid":"wuid:gx:b66815d48e1fd6","pageInheritsPermissions":null,"timeZone":"America/Los_Angeles","properties":{},"type":"text","canChangePath":true,"parentWuid":"wuid:gx:7d5dd9abc1a014b6","revision":17,"title":"Converting Color Representations","isRtlLocale":false,"bidiEnabled":false,"siteLocale":"en","name":"colorspace","path":"/home/colorspace","isSiteRtlLocale":false,"parentPath":"/home"};
webspace.page.breadcrumbs = [{"title":"Research","dir":"ltr","path":"/home","deleted":false},{"title":"Converting Color Representations","dir":"ltr","path":"/home/colorspace","deleted":false}];


webspace.editorResources = {
  text: [
    'http://www.gstatic.com/sites/p/9b2c46/system/js/codemirror.js',
    'http://www.gstatic.com/sites/p/9b2c46/system/app/css/codemirror_css.css',
    'http://www.gstatic.com/sites/p/9b2c46/system/js/trog_edit__en.js',
    'http://www.gstatic.com/sites/p/9b2c46/system/app/css/trogedit.css',
    '/_/rsrc/1383240758000/system/app/css/editor.css',
    'http://www.gstatic.com/sites/p/9b2c46/system/app/css/codeeditor.css',
    '/_/rsrc/1383240758000/system/app/css/camelot/editor-jfk.css'
  ],
  sitelayout: [
    'http://www.gstatic.com/sites/p/9b2c46/system/app/css/sitelayouteditor.css'
  ]
};

var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/9b2c46/system/app/images/cleardot.gif';


var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];


webspace.siteTemplateId = false;


webspace.page.currentTemplate = {"title":"Web Page","path":"/system/app/pagetemplates/text"};



var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Converting Color Representations - Pascal Getreuer">
<meta itemprop="name" content="Converting Color Representations - Pascal Getreuer">
<meta property="og:title" content="Converting Color Representations - Pascal Getreuer">
<meta name="description" content="Pascal Getreuer&#39;s webpage">
<meta itemprop="description" content="Pascal Getreuer&#39;s webpage">
<meta id="meta-tag-description" property="og:description" content="Pascal Getreuer&#39;s webpage">
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="./Converting Color Representations - Pascal Getreuer_files/standard-css-simplywhite-ltr-ltr.css">
<link rel="stylesheet" type="text/css" href="./Converting Color Representations - Pascal Getreuer_files/overlay.css">
<link rel="stylesheet" type="text/css" href="./Converting Color Representations - Pascal Getreuer_files/allthemes-view.css">
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Converting Color Representations - Pascal Getreuer</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
<link rel="canonical" href="./Converting Color Representations - Pascal Getreuer_files/Converting Color Representations - Pascal Getreuer.htm"><script src="./Converting Color Representations - Pascal Getreuer_files/ga.js"></script></head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<script src="./Converting Color Representations - Pascal Getreuer_files/caja.js"> </script>
<script src="./Converting Color Representations - Pascal Getreuer_files/jot_caja.js"> </script>
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tbody><tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class=""><div class="sites-header-cell-buffer-wrapper"><h2><a href="http://sites.google.com/site/getreuer/" dir="ltr" id="sites-chrome-userheader-title">Pascal Getreuer</a></h2></div></td><td class="sites-layout-searchbox "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="http://www.getreuer.info/system/app/pages/search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site"><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site"><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0" style="-webkit-user-select: none;">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container">
</td>
</tr>
</tbody></table> 
</div> 
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tbody><tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left" style="width:160px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed"><div class="sites-embed-content sites-sidebar-nav"><ul jotid="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="http://www.getreuer.info/home" jotid="wuid:gx:7d5dd9abc1a014b6" class="sites-navigation-link">Research</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.getreuer.info/tutorials" jotid="wuid:gx:22c0ba6758171fd5" class="sites-navigation-link">Tutorials</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.getreuer.info/personal" jotid="wuid:gx:1c365a36c8e0c9df" class="sites-navigation-link">Personal</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.getreuer.info/cv" jotid="wuid:gx:6f878cde64968998" class="sites-navigation-link">CV</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.getreuer.info/contact" jotid="wuid:gx:501a5e951a6479a5" class="sites-navigation-link">Contact</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="http://www.getreuer.info/system/app/pages/sitemap/hierarchy" jotid="wuid:gx:f54af0944a9acc2" class="sites-navigation-link">Sitemap</a></div></li></ul></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<a dir="ltr" href="http://www.getreuer.info/home">Research</a>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr">Converting Color Representations</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><table border="0" cellpadding="0" cellspacing="0" style="margin-left:auto;margin-right:auto">
<tbody>
<tr>
<td style="width:48px;height:48px">
<a href="http://www.getreuer.info/home/colorspace/colorspace.zip?attredirects=0" style="text-decoration:none"><img height="48" src="./Converting Color Representations - Pascal Getreuer_files/download.gif" style="display:block;margin-right:auto;margin-left:auto;text-align:center" width="48"></a></td>
<td style="width:112px;height:48px;text-align:center">
<br>
<a href="http://www.getreuer.info/home/colorspace/colorspace.zip?attredirects=0" style="text-decoration:none">Download&nbsp;colorspace</a></td>
</tr>
</tbody>
</table>
<p>This package converts colors between sRGB, Y'P<sub>b</sub>P<sub>r</sub>,
Y'C<sub>b</sub>C<sub>r</sub>, JPEG-Y'C<sub>b</sub>C<sub>r</sub>, Y'UV, Y'IQ,
Y'D<sub>b</sub>D<sub>r</sub>, HSV,
HSL, HSI, CIE XYZ, CIE L*a*b* (CIELAB), CIE L*u*v* (CIELUV), and CIE L*ch
(CIELCH), and CIE CAT02 LMS.  It can be used either as part of a C/C++ program or compiled as 
a MATLAB MEX function.</p>
<div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:250px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-License-BSD-"><strong>1 </strong>License (BSD)</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-Compiling"><strong>2 </strong>Compiling</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-C-Usage"><strong>3 </strong>C Usage</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-MATLAB-Usage"><strong>4 </strong>MATLAB Usage</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-Discrepancies"><strong>5 </strong>Discrepancies</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-Challenges-in-Color-Representation"><strong>6 </strong>Challenges in Color Representation</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-Gamma-Correction"><strong>7 </strong>Gamma Correction</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-Y-CbCr-and-other-Luma-Chroma"><strong>8 </strong>Y'CbCr and other Luma+Chroma</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-HSV-HSL-and-HSI"><strong>9 </strong>HSV, HSL, and HSI</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-CIE-Standard-Color-Spaces"><strong>10 </strong>CIE Standard Color Spaces</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-Accuracy-Test"><strong>11 </strong>Accuracy Test</a></li><li class="goog-toc"><a href="http://www.getreuer.info/home/colorspace#TOC-References"><strong>12 </strong>References</a></li></ol></div></div></div></div><br>
<h2><a name="TOC-License-BSD-"></a>License (BSD)</h2>
<p>Copyright ©&nbsp;2005–2010, Pascal Getreuer<br>
All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without 
modification, are permitted provided that the following conditions are 
met:</p>
<ul><li>Redistributions of source code must retain the above copyright 
notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright 
notice, this list of conditions and the following disclaimer in 
the documentation and/or other materials provided with the distribution.</li></ul>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” 
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
POSSIBILITY OF SUCH DAMAGE.</p>
<h2><a name="TOC-Compiling"></a>Compiling</h2>
<p><tt>colorspace</tt> can be used either as part of a C/C++ program or compiled as 
a MATLAB MEX function.</p>
<p>To demonstrate <tt>colorspace</tt> for use in C programs, a small command line
program <tt>colorcalc</tt> is included.  The program is compiled with GCC by</p>
<p style="margin-left:30px"><tt>gcc colorcalc.c colorspace.c -lm -o colorcalc</tt></p>
<p>This should produce a command line program <tt>colorcalc</tt> that converts
input sRGB values to other representations.</p>
<p>For use in MATLAB,
<tt>colorspace</tt> is compiled as a MEX function by entering</p>
<p style="margin-left:30px"><tt>mex colorspace.c</tt></p>
<p>on the MATLAB command console.
For MEX compiling to work, your system must have a C compiler and MATLAB
must be configured to use it.  For more information, see the help documentation for the <tt>mex</tt> command.</p>
<p>As an alternative to MEX, a pure M-code version <tt>colorspace.m</tt> is also included.</p>
<h2><a name="TOC-C-Usage"></a>C Usage</h2>
<p>First call <tt>GetColorTransform</tt>, specifying the source and destination 
color spaces as <tt>"dest&lt;-src"</tt> or <tt>"src-&gt;dest"</tt>.  Then call 
<tt>ApplyColorTransform</tt> to perform the transform:</p>
<pre>num S[3] = {173, 0.8, 0.5};<br>num D[3];<br>colortransform Trans;<br>       <br><span style="color:rgb(11,83,148)">if</span>(!(GetColorTransform(&amp;Trans, <span style="color:rgb(103,78,167)">"HSI -&gt; Lab"</span>)))<br>{<br>    printf(<span style="color:rgb(103,78,167)">"Invalid syntax or unknown color space\n"</span>);<br>    <span style="color:rgb(11,83,148)">return</span>;<br>}   <br>       <br>ApplyColorTransform(Trans, &amp;D[0], &amp;D[1], &amp;D[2], S[0], S[1], S[2]);<br></pre>
<p>“<tt>num</tt>” is a typedef defined at the beginning of <tt>colorspace.h</tt> that may be set
to either double or float, depending on the application.</p>
<p>A <tt>colortransform</tt> may be applied any number of times.  To transform the color representation 
of an entire image, call <tt>GetColorTransform</tt> once and then call 
<tt>ApplyColorTransform</tt> for each pixel.</p>
<p>Specific transformation routines can also be called directly.  The following
converts an sRGB color to CIELAB and then back to sRGB:</p>
<pre>num R = 0.85, G = 0.32, B = 0.5;<br>num L, a, b;<br>Rgb2Lab(&amp;L, &amp;a, &amp;b, R, G, B);<br>Lab2Rgb(&amp;R, &amp;G, &amp;B, L, a, b);<br></pre>
<p>Generally, the calling syntax is</p>
<pre>Foo2Bar(&amp;B0, &amp;B1, &amp;B2, F0, F1, F2);<br></pre>
<p>where (F0,F1,F2) are the coordinates of a color in space “Foo” and
(B0,B1,B2) are the transformed coordinates in space “Bar.”  For any 
transformation routine, its inverse has the syntax</p>
<pre>Bar2Foo(&amp;F0, &amp;F1, &amp;F2, B0, B1, B2);<br></pre>
<p>The transform routines are consistently named with the first letter of a
color space capitalized with following letters in lower case and omitting
prime symbols.  For example, <tt>Rgb2Ydbdr</tt> converts sRGB to Y'D<sub>b</sub>D<sub>r</sub>.</p>
<p>All transformations assume a two degree observer angle and a D<sub>65</sub> illuminant.
The white point can be changed by modifying the <tt>WHITEPOINT_X</tt>, <tt>WHITEPOINT_Y</tt>,  
<tt>WHITEPOINT_Z</tt> definitions at the beginning of <tt>colorspace.h</tt>.</p>
<p>List of transformation routines:</p>
<pre>Rgb2Yuv(num *Y, num *U, num *V, num R, num G, num B)<br>Rgb2Ycbcr(num *Y, num *Cb, num *Cr, num R, num G, num B)<br>Rgb2Jpegycbcr(num *Y, num *Cb, num *Cr, num R, num G, num B)<br>Rgb2Ypbpr(num *Y, num *Pb, num *Pr, num R, num G, num B)<br>Rgb2Ydbdr(num *Y, num *Db, num *Dr, num R, num G, num B)<br>Rgb2Yiq(num *Y, num *I, num *Q, num R, num G, num B)<br>Rgb2Hsv(num *H, num *S, num *V, num R, num G, num B)<br>Rgb2Hsl(num *H, num *S, num *L, num R, num G, num B)<br>Rgb2Hsi(num *H, num *S, num *I, num R, num G, num B)<br>Rgb2Xyz(num *X, num *Y, num *Z, num R, num G, num B)<br>Xyz2Lab(num *L, num *a, num *b, num X, num Y, num Z)<br>Xyz2Luv(num *L, num *u, num *v, num X, num Y, num Z)<br>Xyz2Lch(num *L, num *C, num *h, num X, num Y, num Z)<br>Xyz2Cat02lms(num *L, num *M, num *S, num X, num Y, num Z) <br>Rgb2Lab(num *L, num *a, num *b, num R, num G, num B)<br>Rgb2Luv(num *L, num *u, num *v, num R, num G, num B)<br>Rgb2Lch(num *L, num *C, num *h, num R, num G, num B)<br>Rgb2Cat02lms(num *L, num *M, num *S, num R, num G, num B) <br></pre>
<p>(Similarly for the inverse transformations.)</p>
<p>It is possible to transform between two arbitrary color spaces by first
transforming from the source space to sRGB and then transforming from
sRGB to the desired destination space.  For transformations between CIE
color spaces, it is convenient to use XYZ as the intermediate space.  This
is the strategy used by <tt>GetColorTransform</tt> and <tt>ApplyColorTransform</tt>.</p>
<h2><a name="TOC-MATLAB-Usage"></a>MATLAB Usage</h2>
<p><tt>B = colorspace(S,A)</tt> converts the color
representation of image <tt>A</tt> where <tt>S</tt> is a string
specifying the conversion.  <tt>S</tt> tells the source and
destination color spaces, <tt>S = 'dest&lt;-src'</tt>, or
alternatively, <tt>S = 'src-&gt;dest'</tt>.  Supported color
spaces are</p>
<table border="0" style="margin-left:15px">
<tbody>
<tr>
<td style="color:rgb(142,124,195)"><tt>'RGB'</tt></td>
<td>sRGB IEC 61966-2-1</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'YPbPr'</tt></td>
<td>Luma (ITU-R BT.601) + Chroma</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'YCbCr'</tt></td>
<td>Luma + Chroma (digitized version of
Y'P<sub>b</sub>P<sub>r</sub>)</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'JPEG-YCbCr'</tt></td>
<td>Luma + Chroma space used in JFIF JPEG</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'YUV'</tt></td>
<td>NTSC PAL Y'UV Luma + Chroma</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'YIQ'</tt></td>
<td>NTSC Y'IQ Luma + Chroma</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'YDbDr'</tt></td>
<td>SECAM Luma + Chroma</td>
</tr>
<tr>
<td><tt><span style="color:rgb(142,124,195)">'HSV'</span> or <span style="color:rgb(142,124,195)">'HSB'</span>&nbsp;&nbsp;</tt></td>
<td>Hue Saturation Value/Brightness</td>
</tr>
<tr>
<td><tt><span style="color:rgb(142,124,195)">'HSL'</span> or <span style="color:rgb(142,124,195)">'HLS'</span></tt></td>
<td>Hue Saturation Luminance</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'HSI'</tt></td>
<td>Hue Saturation Intensity</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'XYZ'</tt></td>
<td>CIE XYZ</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'Lab'</tt></td>
<td>CIE L*a*b* (CIELAB)</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'Luv'</tt></td>
<td>CIE L*u*v* (CIELUV)</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'LCH'</tt></td>
<td>CIE L*C*H* (CIELCH)</td>
</tr>
<tr>
<td style="color:rgb(142,124,195)"><tt>'CAT02 LMS'</tt></td>
<td>CIE CAT02 LMS</td>
</tr>
</tbody>
</table>
<p>All conversions assume 2 degree observer and D<sub>65</sub>
illuminant.  Color space names are case insensitive.  When sRGB is
the source or destination, it can be omitted. For example
<tt>'yuv&lt;-'</tt> is short for <tt>'yuv&lt;-rgb'</tt>.</p>
<p>MATLAB uses two standard data formats for
sRGB: double data with intensities in the range 0 to 1, and uint8
data with integer-valued intensities from 0 to 255.  <tt>colorspace</tt>
expects sRGB data to be scaled between 0 and 1, and only accepts double data.</p>
<p>If <tt>A</tt> is an M×3 array, like a colormap,
<tt>B</tt> will also have size M×3.</p>
<p><b>Typical Usage</b><br>
How does one get color image data into MATLAB?
The function <tt>imread</tt> imports most formats as a uint8 array of
size M×N×3, where the third dimension separates the R',G',
and B' color channels.</p>
<pre>A = imread(<span style="color:rgb(142,124,195)">'boats.png'</span>);  <span style="color:rgb(56,118,29)">% Import data as uint8 in the range [0,255]</span><br>A = double(A)/255;        <span style="color:rgb(56,118,29)">% Cast to double in the range [0,1]</span><br><br><span style="color:rgb(56,118,29)">% View the image</span><br>subplot(2,2,1);<br>image(A);<br>axis <span>image</span><br></pre>
<p>(For images using palette indexing, <tt>imread</tt> instead returns
an array of color indices and a colormap; palette-based images require
other handling.)  To view a color image, use <tt>image</tt> or
<tt>imshow</tt>.  The image may either be a uint8 array with
intensities in the range [0,255] or a double array with the range
[0,1].</p>
<p>Once an sRGB array is loaded, <tt>colorspace</tt> can convert it
to another color representation.  To convert to
Y'P<sub>b</sub>P<sub>r</sub>, for example, use</p>
<pre>B = colorspace(<span style="color:rgb(142,124,195)">'YPbPr&lt;-RGB'</span>,A);<br></pre>
<p>Since the resulting array <tt>B</tt> is not in sRGB
representation, it no longer makes sense to visualize it as a single
color image, other than transforming it back to sRGB first.  Instead, 
view each of the channels <tt>B(:,:,1)</tt>,
<tt>B(:,:,2)</tt>, <tt>B(:,:,3)</tt> individually as gray-scale
images:</p>
<pre><span style="color:rgb(56,118,29)">% View the individual channels</span><br>subplot(2,2,1);<br>imagesc(B(:,:,1));<br>colormap(gray(256));<br>axis <span>image</span><br>title <span style="color:rgb(142,124,195)">'Y'''</span><br>subplot(2,2,3);<br>imagesc(B(:,:,2));<br>colormap(gray(256));<br>axis <span>image</span><br>title <span style="color:rgb(142,124,195)">P_b</span><br>subplot(2,2,4);<br>imagesc(B(:,:,3));<br>colormap(gray(256));<br>axis <span>image</span><br>title <span style="color:rgb(142,124,195)">P_r</span><br></pre>
<p>To transform <tt>B</tt> back to sRGB, use <tt>colorspace</tt> again:</p>
<pre>ARecovered = colorspace(<span style="color:rgb(142,124,195)">'RGB&lt;-YPbPr'</span>,B);<br></pre>
<h2><a name="TOC-Discrepancies"></a>Discrepancies</h2>
<p>While much effort has been made to make <tt>colorspace</tt> accurate and in agreement with 
standards, it is possible to see differences between <tt>colorspace</tt> and other color 
transformation software.  Potential sources for discrepancy are</p>
<ul><li>differences in how the components are scaled, for example, sRGB values scaled in [0,255]
vs. [0,1];</li>
<li>different conventions for handling out-of-gamut colors;</li>
<li>naming confusion over similar but distinct color spaces 
(e.g., HSV vs. HSL vs. HSI and also Y'P<sub>b</sub>P<sub>r</sub> vs. Y'UV vs. Y'IQ);</li>
<li>(for CIE spaces) differences in the gamma correction function, observer angle, or 
white point.</li></ul>
<p>Finally, although hopefully unlikely, it is possible that a discrepancy is due to a bug in
<tt>colorspace</tt>.</p>
<p><tt>colorspace</tt> does have the property that transformation of an in-gamut color followed
by the inverse transformation accurately recovers the original color (see the <a href="http://www.getreuer.info/home/colorspace#TOC-Accuracy-Test">Accuracy Test</a>).
</p>
<p>Transformations with <tt>colorspace</tt> assume a 2 degree observe, D<sub>65</sub> illuminant,
and using the gamma correction function from <a href="http://www.getreuer.info/home/colorspace#TOC-Gamma-Correction">Gamma Correction</a>.</p>
<p>Beware that <tt>colorspace</tt>'s transformations generally do not constrain colors to be in-gamut.
Particularly, transforming from another space to sRGB may obtain 
R'G'B' values outside of the [0,1] range.  In MATLAB, 
the result should be clamped to [0,1] before displaying:</p>
<pre>image(min(max(B,0),1));  <span style="color:rgb(56,118,29)">% Clamp B to [0,1] and display</span><br></pre>
<h2><a name="TOC-Challenges-in-Color-Representation"></a>Challenges in Color Representation</h2>
<p>Device-independent, quantitative description of color is a
surprisingly challenging problem.  For example, four shades of gray
surrounded by black are perceived differently than the same four
shades surrounded by white <a href="http://www.getreuer.info/home/colorspace#TOC-References" style="text-decoration:none">[1]</a>.</p>
<table border="0">
<tbody>
<tr>
<td>
<table border="0" style="background-color:black">
<tbody>
<tr>
<td align="center" style="width:115px;height:50px" valign="middle">
<table border="0">
<tbody>
<tr>
<td style="background-color:rgb(224,224,224);width:20px">&nbsp;</td>
<td style="background-color:rgb(176,176,176);width:20px">&nbsp;</td>
<td style="background-color:rgb(112,112,112);width:20px">&nbsp;</td>
<td style="background-color:rgb(48,48,48);width:20px">&nbsp;</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table border="0">
<tbody>
<tr>
<td align="center" style="width:115px;height:50px" valign="middle">
<table border="0">
<tbody>
<tr>
<td style="background-color:rgb(224,224,224);width:20px">&nbsp;</td>
<td style="background-color:rgb(176,176,176);width:20px">&nbsp;</td>
<td style="background-color:rgb(112,112,112);width:20px">&nbsp;</td>
<td style="background-color:rgb(48,48,48);width:20px">&nbsp;</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p><i>Surrounding illumination affects the perceived color.</i></p>
<p>On black background, the lightest shade of gray seems to be almost
white.  But on white background, the same shade appears significantly
darker.  This discrepancy suggests that the perceived colors on a
monitor depend on the illumination of the surrounding room.  Thus for
precise color description, color specifications include the intended
viewing conditions.</p>
<p>The <i>intensity</i> of a color is defined as the watts per unit
area rendered by the display device.  Another problem is that even
under equal intensity, some colors are visually brighter than
others.</p>
<table border="0">
<tbody>
<tr>
<td>
<table border="0" style="background-color:black">
<tbody>
<tr>
<td align="center" style="width:195px;height:50px" valign="middle">
<table border="0">
<tbody>
<tr>
<td style="background-color:rgb(255,255,255);width:20px">&nbsp;</td>
<td style="background-color:rgb(255,255,0);width:20px">&nbsp;</td>
<td style="background-color:rgb(0,255,255);width:20px">&nbsp;</td>
<td style="background-color:rgb(0,255,0);width:20px">&nbsp;</td>
<td style="background-color:rgb(255,0,255);width:20px">&nbsp;</td>
<td style="background-color:rgb(255,0,0);width:20px">&nbsp;</td>
<td style="background-color:rgb(0,0,255);width:20px">&nbsp;</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p><i>Intensity ≠ Visual Brightness.</i></p>
<p>To overcome this non-uniformity, many color spaces instead consider
<i>luminance</i>, a quantitative estimate of the perceived
brightness.</p>
<p>Different color representations try to overcome these problems,
with varying degrees of success.  It is for this reason that there are
so many standard color representations.</p>
<h2><a name="TOC-Gamma-Correction"></a>Gamma Correction</h2>
<p>CRT monitors have a nonlinear relationship between the input
voltages and the rendered intensities.  To reproduce an image
accurately, the image is <i>gamma-corrected</i> in such a way that the
monitor displays the desired intensities.</p>
<p>In <tt>colorspace</tt>, the “RGB” space is sRGB.  The sRGB space was
designed in 1996 for direct display on typical CRT monitors and standardized 
in 1999 by International Electrotechnical Commission (IEC) as IEC 61966-2-1.  
The “s” in sRGB is to mean “standard.”  From 
linear RGB values, the sRGB values are gamma-compensated by the formula
</p>
<table border="0" style="margin-left:30px">
<tbody>
<tr>
<td>
R' = 1.055 R<sup>1/2.4</sup> − 0.055&nbsp;&nbsp;</td>
<td>
if R ≤ 0.0031308,</td>
</tr>
<tr>
<td>
R' = 12.92 R, </td>
<td>
if R &gt; 0.0031308,</td>
</tr>
</tbody>
</table>
<p>and similarly for G' and B' <a href="http://www.getreuer.info/home/colorspace#TOC-References" style="text-decoration:none">[4]</a>.</p>
<p>A standard notation is to denote R',G',B' quantities and derived 
quantities with a prime ' to signify gamma-correction.  Since 
gamma-correction is already applied by digital cameras as standard 
practice, most digital image data should be interpreted as R'G'B', 
and not RGB.</p>
<h2><a name="TOC-Y-CbCr-and-other-Luma-Chroma"></a>Y'C<sub>b</sub>C<sub>r</sub>
and other Luma+Chroma</h2>
<p>The <i>luma</i> of a color is an estimate of brightness based on
gamma-corrected samples.  Its definition (ITU-R Recommendation
BT.601-4) is</p>
<p style="text-align:center">
Y'<sub>601</sub> = 0.299 R' + 0.587 G' + 0.114 B'.
</p>
<p>This luma measure is (up to a scale factor) the Y' in
Y'P<sub>b</sub>P<sub>r</sub>, Y'C<sub>b</sub>C<sub>r</sub>,
JPEG-Y'C<sub>b</sub>C<sub>r</sub>, Y'UV, Y'IQ, and
Y'D<sub>b</sub>D<sub>r</sub>.  The remaining two components in each of
these representations capture the <i>chroma</i>, the part of a color
independent of luma <a href="http://www.getreuer.info/home/colorspace#TOC-References" style="text-decoration:none">[2]</a>.</p>
<p><b>Y'P<sub>b</sub>P<sub>r</sub></b><br>
Given R', G', and B' in the range [0,1], 
the Y'P<sub>b</sub>P<sub>r</sub> components are</p>
<table border="0" style="margin-left:30px">
<tbody>
<tr>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">Y'</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">P<sub>b</sub></td>
</tr>
<tr>
<td align="center">P<sub>r</sub></td>
</tr>
</tbody>
</table>
</td>
<td>=</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td>0.299</td>
<td>0.587</td>
<td>0.114</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td>−0.1687367&nbsp;</td>
<td>−0.331264&nbsp;</td>
<td>0.5</td>
</tr>
<tr>
<td>0.5</td>
<td>−0.418688&nbsp;</td>
<td>−0.081312</td>
</tr>
</tbody>
</table>
</td>
<td>×</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">R'</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">G'</td>
</tr>
<tr>
<td align="center">B'</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>with Y' in [0,1] and P<sub>b</sub>, P<sub>r</sub> in
[−0.5,0.5].</p>
<p><b>Y'C<sub>b</sub>C<sub>r</sub></b><br>
Y'C<sub>b</sub>C<sub>r</sub>, also called YCC, is a rescaling of
Y'P<sub>b</sub>P<sub>r</sub> such that component can be stored as
8-bit unsigned values.  Given R', G', and B' in the range [0,1],</p>
<table border="0" style="margin-left:30px">
<tbody>
<tr>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">Y'</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">C<sub>b</sub></td>
</tr>
<tr>
<td align="center">C<sub>r</sub></td>
</tr>
</tbody>
</table>
</td>
<td>=</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">16</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">128</td>
</tr>
<tr>
<td align="center">128</td>
</tr>
</tbody>
</table>
</td>
<td>+</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td>65.481</td>
<td>128.553</td>
<td>24.966</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td>−37.797&nbsp;</td>
<td>−74.203</td>
<td>112.0</td>
</tr>
<tr>
<td>112.0</td>
<td>−93.786&nbsp;</td>
<td>−18.214</td>
</tr>
</tbody>
</table>
</td>
<td>×</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">R'</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">G'</td>
</tr>
<tr>
<td align="center">B'</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>with Y' in [16,235] and C<sub>b</sub>, C<sub>r</sub> in
[16,240].</p>
<p><b>JPEG-Y'C<sub>b</sub>C<sub>r</sub></b><br>
JPEG-Y'C<sub>b</sub>C<sub>r</sub> is another rescaling of
Y'P<sub>b</sub>P<sub>r</sub>, used in the JPEG image format,</p>
<p style="text-align:center">
</p>
<table align="center" border="0">
<tbody>
<tr>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">Y'</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">C<sub>b</sub></td>
</tr>
<tr>
<td align="center">C<sub>r</sub></td>
</tr>
</tbody>
</table>
</td>
<td>=</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">0</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">0.5</td>
</tr>
<tr>
<td align="center">0.5</td>
</tr>
</tbody>
</table>
</td>
<td>+</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td>0.299</td>
<td>0.587</td>
<td>0.114</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td>−0.1687367&nbsp;</td>
<td>−0.331264&nbsp;</td>
<td>0.5</td>
</tr>
<tr>
<td>0.5</td>
<td>−0.418688&nbsp;</td>
<td>−0.081312</td>
</tr>
</tbody>
</table>
</td>
<td>×</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">R'</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">G'</td>
</tr>
<tr>
<td align="center">B'</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>with Y', C<sub>b</sub>, C<sub>r</sub> in [0,1].</p>
<h2><a name="TOC-HSV-HSL-and-HSI"></a>HSV, HSL, and HSI</h2>
<p>The Hue Saturation Value/Brightness (HSV/HSB) is an intuitive color
system, measuring the <i>hue</i> of a color as the angle on the HSV
color wheel, the <i>saturation</i> as the color's vibrancy, and the
color's <i>value</i> or approximate brightness.</p>
<p>HSV is related to sRGB by</p>
<table border="0px" style="margin-left:30px">
<tbody>
<tr>
<td>H = hexagonal hue angle&nbsp;&nbsp;&nbsp;</td>
<td>(0 ≤ H &lt; 360),</td>
</tr>
<tr>
<td>S = C/V</td>
<td>(0 ≤ S ≤ 1),</td>
</tr>
<tr>
<td>V = max(R',G',B')</td>
<td>(0 ≤ V ≤ 1),</td>
</tr>
</tbody>
</table>
<p>where C = max(R',G',B') − min(R',G',B').  The hue angle H is computed on
a hexagon.  The space is geometrically a hexagonal cone.</p>
<p style="text-align:center">
<img alt="" height="209px" src="./Converting Color Representations - Pascal Getreuer_files/colorspace_01.jpg" width="462px"><br>
<i>Conic representation of the HSV and HSL color spaces
(<tt>colorspace_demo.m</tt>).</i>
</p>
<p>The Hue Saturation Lightness (HSL or HLS) color space, has the same definition for color hue
as HSV.  The other two components differ such that all colors tend to
white as lightness increases.</p>
<p>HSL is related to sRGB by</p>
<table border="0px" style="margin-left:30px">
<tbody>
<tr>
<td>H = hexagonal hue angle&nbsp;&nbsp;&nbsp;</td>
<td>(0 ≤ H &lt; 360),</td>
</tr>
<tr>
<td>S = C/(1 - |2L - 1|)</td>
<td>(0 ≤ S ≤ 1),</td>
</tr>
<tr>
<td>L = (max(R',G',B') + min(R',G',B'))/2</td>
<td>(0 ≤ L ≤ 1),</td>
</tr>
</tbody>
</table>
<p>where H and C are the same as in HSV.  Geometrically, the space is a double hexagonal cone.</p>
<p>A third related space is Hue Saturation Intensity (HSI), which is popular in 
computer vision.  HSI is related to sRGB by</p>
<table border="0px" style="margin-left:30px">
<tbody>
<tr>
<td>H = polar hue angle&nbsp;&nbsp;&nbsp;</td>
<td>(0 ≤ H &lt; 360),</td>
</tr>
<tr>
<td>S = 1 - min(R',G',B')/I</td>
<td>(0 ≤ S ≤ 1),</td>
</tr>
<tr>
<td>I = (R'+G'+B')/3</td>
<td>(0 ≤ I ≤ 1).</td>
</tr>
</tbody>
</table>
<p>Unlike HSV and HSL, the hue angle H is computed on a circle rather than a hexagon.</p>
<p>The HSV, HSL, and HSI systems are ambiguous on whether components should
be based on RGB or gamma-corrected sRGB, and specify no white point.
When truly device-independent color reproduction is necessary, it is
better to use a CIE color space <a href="http://www.getreuer.info/home/colorspace#TOC-References" style="text-decoration:none">[2]</a>.</p>
<h2><a name="TOC-CIE-Standard-Color-Spaces"></a>CIE Standard Color Spaces</h2>
<p>In 1931, the Commission Internationale de L'Éclairage (CIE)
defined a standard color system for precise color reproduction called
XYZ.  The XYZ color space has a linear relationship with
non-gamma-corrected RGB <a href="http://www.getreuer.info/home/colorspace#TOC-References" style="text-decoration:none">[2]</a>:</p>
<table border="0" style="margin-left:30px">
<tbody>
<tr>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">R</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">G</td>
</tr>
<tr>
<td align="center">B</td>
</tr>
</tbody>
</table>
</td>
<td>=</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td>3.240479</td>
<td>−1.53715</td>
<td>−0.498535</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td>−0.969256&nbsp;</td>
<td>1.875992&nbsp;</td>
<td>0.041556</td>
</tr>
<tr>
<td>0.055648</td>
<td>−0.204043&nbsp;</td>
<td>1.057311</td>
</tr>
</tbody>
</table>
</td>
<td>×</td>
<td>
<table border="0">
<tbody>
<tr>
<td rowspan="3">&nbsp;</td>
<td align="center">X</td>
<td rowspan="3">&nbsp;</td>
</tr>
<tr>
<td align="center">Y</td>
</tr>
<tr>
<td align="center">Z</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>The closely-related xyY space defines the <i>chromaticity
coordinates</i>,</p>
<table border="0">
<tbody>
<tr>
<td valign="top">
<table border="0">
<tbody>
<tr>
<td>
x =</td>
<td>
<table border="0">
<tbody>
<tr>
<td align="center">X</td>
</tr>
<tr>
<td align="center" style="border-top:1px solid black">
X+Y+Z</td>
</tr>
</tbody>
</table>
</td>
<td>, y =</td>
<td>
<table border="0">
<tbody>
<tr>
<td align="center">Y</td>
</tr>
<tr>
<td align="center" style="border-top:1px solid black">
X+Y+Z</td>
</tr>
</tbody>
</table>
</td>
<td>.</td>
</tr>
</tbody>
</table>
</td>
<td>&nbsp;</td>
<td style="width:275px">
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td valign="middle">y</td>
<td>
<img alt="" height="250" src="./Converting Color Representations - Pascal Getreuer_files/colorspace_02.jpg" width="222">
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td align="center">x</td>
</tr>
</tbody>
</table>
<br>
<i>The CIE “tongue”: the region of all colors over
x and y (<tt>colorspace_ciedemo.m</tt>).</i></td>
</tr>
</tbody>
</table>
<p>In the figure, the U-shaped boundary is parameterized by light wavelength.
The triangular region corresponds to the sRGB space, the range of colors
that a typical computer monitor can display.</p>
<p>XYZ is the foundation of the L*a*b* (CIELAB), L*u*v* (CIELUV), and
L*ch color spaces.  Let X<sub>n</sub>,Y<sub>n</sub>,Z<sub>n</sub> be
the XYZ values of a reference white point.  The white point in
<tt>colorspace</tt> is the standard D<sub>65</sub> white point,
X<sub>n</sub> = 0.950456, Y<sub>n</sub> =
1, Z<sub>n</sub> = 1.088754.  The <i>lightness</i>,
denoted by L* in each of these spaces, is defined as</p>
<table border="0" style="margin-left:30px">
<tbody>
<tr>
<td>
L* = 116 (Y/Y<sub>n</sub>)<sup>1/3</sup> − 16,</td>
<td valign="bottom">
if Y/Y<sub>n</sub> &gt; (6/29)<sup>3</sup></td>
</tr>
<tr>
<td>
L* = (Y/Y<sub>n</sub> − 4/29) 108/841, &nbsp;
</td>
<td>if Y/Y<sub>n</sub>  ≤ (6/29)<sup>3</sup></td>
</tr>
</tbody>
</table>
<p>The white point has lightness 100, and provided 0 ≤ Y ≤
Y<sub>n</sub>, L* is in the range [0,100].</p>
<p>The other two components in each representation describe the
chromaticity.  L*a*b* and L*u*v* both attempt to "perceptually
linearize" chromaticity, meaning that changes in color values
correspond to proportional changes in visual importance.  L*ch is
L*a*b* with chromaticity expressed in polar coordinates.</p>
<p style="text-align:center">
<img alt="" height="179" src="./Converting Color Representations - Pascal Getreuer_files/colorspace_03.jpg" width="387"><br>
<i>Visualizations of the L*a*b* and L*u*v* color spaces
(<tt>colorspace_demo.m</tt>).</i>
</p>
<h2><a name="TOC-Accuracy-Test"></a>Accuracy Test</h2>
<p>To verify the invertibility of the color transformations, this test
transforms sRGB data to a space, inverts, and compares with the
original data.</p>
<pre>N = 1e5;          <span style="color:rgb(56,118,29)">% Number of points to test</span><br>A = rand(N,3);    <span style="color:rgb(56,118,29)">% Generate points uniformly in sRGB colorspace</span><br><br>Space = {<span style="color:rgb(142,124,195)">'YPbPr'</span>,<span style="color:rgb(142,124,195)">'YCbCr'</span>,<span style="color:rgb(142,124,195)">'JPEG-YCbCr'</span>,<span style="color:rgb(142,124,195)">'YDbDr'</span>,<span style="color:rgb(142,124,195)">'YIQ'</span>,<span style="color:rgb(142,124,195)">'YUV'</span>,<span style="color:rgb(142,124,195)">'HSV'</span>,...<br>      <span style="color:rgb(142,124,195)">'HSL'</span>,<span style="color:rgb(142,124,195)">'HSI'</span>,<span style="color:rgb(142,124,195)"><span>'XYZ'</span></span>,<span style="color:rgb(142,124,195)">'Lab'</span>,<span style="color:rgb(142,124,195)">'Luv'</span>,<span style="color:rgb(142,124,195)">'LCH'</span>,<span style="color:rgb(142,124,195)">'CAT02LMS'</span>};<br>fprintf(<span style="color:rgb(142,124,195)">'\n Transform          RMSE Error   Max Error\n\n'</span>);<br><br><span style="color:rgb(11,83,148)">for</span> k = 1:length(Space)<br>   B = colorspace([Space{k} <span style="color:rgb(142,124,195)">'&lt;-RGB'</span>],A);  <span style="color:rgb(56,118,29)">% Convert to Space{k}</span><br>   R = colorspace([<span style="color:rgb(142,124,195)">'RGB&lt;-' </span>Space{k}],B);  <span style="color:rgb(56,118,29)">% Convert back to sRGB</span><br>   RMSE = sqrt(mean((A(:) - R(:)).^2));<br>   MaxError = max(abs(A(:) - R(:)));<br>   fprintf(<span style="color:rgb(142,124,195)">' RGB&lt;-&gt;%-10s   %9.2e    %9.2e\n'</span>, ...<br>      Space{k}, RMSE, MaxError);<br><span style="color:rgb(11,83,148)">end</span><br></pre>
<pre> Transform          RMSE Error   Max Error<br><br> RGB&lt;-&gt;YPbPr        9.07e-017    4.44e-016<br> RGB&lt;-&gt;YCbCr        1.06e-016    5.55e-016<br> RGB&lt;-&gt;JPEG-YCbCr   1.06e-016    5.55e-016<br> RGB&lt;-&gt;YDbDr        8.72e-017    4.44e-016<br> RGB&lt;-&gt;YIQ          8.17e-017    4.44e-016<br> RGB&lt;-&gt;YUV          6.99e-017    3.54e-016<br> RGB&lt;-&gt;HSV          7.28e-017    1.22e-015<br> RGB&lt;-&gt;HSL          8.06e-017    1.22e-015<br> RGB&lt;-&gt;HSI          1.10e-016    7.77e-016<br> RGB&lt;-&gt;XYZ          2.30e-016    6.36e-015<br> RGB&lt;-&gt;Lab          1.09e-015    2.10e-014<br> RGB&lt;-&gt;Luv          7.98e-016    2.00e-014<br> RGB&lt;-&gt;LCH          1.11e-015    2.39e-014<br> RGB&lt;-&gt;CAT02 LMS    8.29e-016    1.30e-014<br></pre>
<p>Transformations are accurate to machine precision.  The first
six spaces, being linearly related to sRGB, have higher accuracy 
than the nonlinearly-related spaces.</p>
<h2><a name="TOC-References"></a>References</h2>
<table border="0" cellpadding="6">
<tbody>
<tr>
<td>[1] C. Poynton.  <a href="http://www.poynton.com/">"Frequently Asked Questions about
Gamma."</a> 1998.
</td>
</tr>
<tr>
<td>[2] C. Poynton.  <a href="http://www.poynton.com/">"Frequently Asked Questions about
Color."</a> 1997.
</td>
</tr>
<tr>
<td>[3] J. Burkardt.  <a href="http://www.csit.fsu.edu/~burkardt/f_src/colors/colors.html">
"COLORS - Color Coordinate Conversion."</a> (FORTRAN code.) 2002.
</td>
</tr>
<tr>
<td>[4] Wikipedia: <a href="http://en.wikipedia.org/wiki/SRGB">"sRGB"</a>
</td>
</tr>
<tr>
<td>[5] Wikipedia: <a href="http://en.wikipedia.org/wiki/YUV">"YUV"</a>
</td>
</tr>
<tr>
<td>[6] Wikipedia: <a href="http://en.wikipedia.org/wiki/YCbCr">"YCbCr"</a>
</td>
</tr>
<tr>
<td>[7] Wikipedia: <a href="http://en.wikipedia.org/wiki/YPbPr">"YPbPr"</a>
</td>
</tr>
<tr>
<td>[8] Wikipedia: <a href="http://en.wikipedia.org/wiki/YDbDr">"YDbDr"</a>
</td>
</tr>
<tr>
<td>[9] Wikipedia: <a href="http://en.wikipedia.org/wiki/YIQ">"YIQ"</a>
</td>
</tr>
<tr>
<td>[10] Wikipedia: <a href="http://en.wikipedia.org/wiki/HSL_and_HSV">"HSL and HSV"</a>
</td>
</tr>
<tr>
<td>[11] Wikipedia: <a href="http://en.wikipedia.org/wiki/CIE_1931_color_space">"CIE 1931 color space"</a>
</td>
</tr>
<tr>
<td>[12] Wikipedia: <a href="http://en.wikipedia.org/wiki/Lab_color_space">"Lab color space"</a>
</td>
</tr>
<tr>
<td>[13] Wikipedia: <a href="http://en.wikipedia.org/wiki/CIELUV_color_space">"CIELUV color space"</a>
</td>
</tr>
<tr>
<td>[14] Wikipedia: <a href="http://en.wikipedia.org/wiki/LMS_color_space">"LMS color space"</a>
</td>
</tr>
</tbody>
</table>
<br>
<p style="font-size:80%">This material is based upon work supported by the National 
Science Foundation under Award No.&nbsp;DMS-1004694.  Any opinions, findings, and 
conclusions or recommendations expressed in this material are those of the author(s) 
and do not necessarily reflect the views of the National Science Foundation.</p></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
</div>
</div> 
</td> 
</tr>
</tbody></table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter"><p><a class="sites-system-link" href="http://www.getreuer.info/system/app/pages/reportAbuse" target="_blank">Report Abuse</a>|<a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a>|<a class="sites-system-link" href="http://www.getreuer.info/system/app/pages/removeAccess" target="_blank">Remove Access</a>|<span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>

<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="./Converting Color Representations - Pascal Getreuer_files/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
    
        sites.core.Analytics.createTracker();
        sites.core.Analytics.trackPageview();
      
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("2bd", "Research", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('http://www.getreuer.info/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type;
                      window.jstiming.report(loadTimer, {}, 'http://csi.gstatic.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
 //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
              JOT_postEvent('renderPlus', null, 'sites-chrome-main');
            </script>
<div id="server-timer-div" style="display:none"> </div>
<script>
          window.jstiming.load.tick('render');
        </script>


<div id="YontooInstallID" style="display: none;">7945d6d3-d7bb-458e-b125-8bb5481c140a</div><div id="Y2PluginIds" style="display: none;">Y2:7945d6d3-d7bb-458e-b125-8bb5481c140a</div></body></html>